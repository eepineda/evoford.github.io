<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1, maximum-scale=1" name="viewport"/>
<title>EvoSustain Store App - Full Process with Back Buttons</title>

<style>
body, html {
  margin: 0;
  padding: 0;
  font-family: 'Segoe UI', sans-serif;
  background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
  color: #0d47a1;
}
header {
  background-color: #2196f3;
  color: #ffffff;
  padding: 1rem;
  font-size: 1.5rem;
  font-weight: bold;
  text-align: center;
}
main {
  padding: 1rem;
}
button, .submit-btn {
  background-color: #2196f3;
  color: white;
  padding: 10px 20px;
  border-radius: 8px;
  border: none;
  font-weight: bold;
  font-size: 1rem;
  cursor: pointer;
  transition: background 0.3s ease;
}
button:hover, .submit-btn:hover {
  background-color: #1976d2;
}
.card {
  background: #ffffff;
  border-radius: 12px;
  padding: 16px;
  margin-bottom: 12px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}
nav {
  background-color: #e3f2fd;
  display: flex;
  justify-content: space-around;
  padding: 0.7rem 0;
  font-weight: bold;
  font-size: 0.85rem;
  color: #1976d2;
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
}
</style></head>
<body>
<div aria-label="EvoSustain Store Mobile App" class="mobile-mockup" role="application">
<header>
    EvoSustain Store
    <svg aria-hidden="true" fill="#a8d5a2" focusable="false" viewbox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
<circle cx="32" cy="32" fill="none" r="30" stroke="#4caf50" stroke-width="3"></circle>
<circle cx="32" cy="32" r="14"></circle>
</svg>
</header>
<main>
<!-- Login -->
<section aria-label="Login screen" class="active" id="login" tabindex="0">
<h2>
<svg viewbox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4S14.21 4 12 4 8 5.79 8 8s1.79 4 4 4z"></path><path d="M12 14c-4 0-6 2-6 6v2h12v-2c0-4-2-6-6-6z"></path></svg>
        Login / Sign-Up
      </h2>
<form id="loginForm">
<label for="storeId">Store ID</label>
<input autocomplete="off" id="storeId" placeholder="Enter Store ID" required="" type="text"/>
<button class="submit-btn" type="submit">Login</button>
</form>
<p style="text-align:center; font-weight:700; margin-top:10px;">Or use QR onboarding on Home screen</p>
</section>
<!-- Home / Scan QR -->
<section aria-label="Home and Scan QR" id="home" tabindex="0">
<h2>
<svg viewbox="0 0 24 24"><path d="M3 3h18v18H3z" fill="none"></path><path d="M21 3H3v18h18V3zM9 8H7v2H5v2h2v2h2v-2h2v-2H9z"></path></svg>
        Scan QR Code
      </h2>
<button class="submit-btn" id="startScanBtn">Simulate Scan QR Code</button>
</section>
<!-- Request Collection Form -->
<section aria-label="Request Collection Form" id="requestForm" tabindex="0">
<button aria-label="Back to Home" class="back-btn" type="button">
<svg viewbox="0 0 24 24"><path d="M15 18l-6-6 6-6"></path></svg>
        Back
      </button>
<h2>
<svg viewbox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"></path></svg>
        Request Collection
      </h2>
<form id="collectionForm">
<label for="location">Location</label>
<input id="location" readonly="" type="text"/>
<label for="binType">Bin Type</label>
<input id="binType" readonly="" type="text"/>
<label for="volume">Volume (m³)</label>
<input id="volume" min="0.1" placeholder="e.g., 2.5" required="" step="0.1" type="number"/>
<label for="timeWindow">Time Window</label>
<select id="timeWindow" required="">
<option disabled="" selected="" value="">Select time window</option>
<option>9:00–11:00 AM</option>
<option>11:00 AM–1:00 PM</option>
<option>1:00–3:00 PM</option>
<option>3:00–5:00 PM</option>
</select>
<label for="notes">Additional Notes (optional)</label>
<textarea id="notes" placeholder="Enter any notes..." rows="3"></textarea>
<button class="submit-btn" type="submit">Submit Request</button>
</form>
</section>
<!-- Request Confirmation -->
<section aria-label="Request Confirmation" id="requestConfirm" tabindex="0">
<button aria-label="Back to Home" class="back-btn" type="button">
<svg viewbox="0 0 24 24"><path d="M15 18l-6-6 6-6"></path></svg>
        Back
      </button>
<h2>
<svg viewbox="0 0 24 24"><path d="M9 12l2 2 4-4"></path></svg>
        Request Confirmed
      </h2>
<div class="status-box">
<p>Status: <strong>Scheduled</strong></p>
<p>Estimated Collection Time: <strong id="etaTime">12:30 PM</strong></p>
</div>
<button class="submit-btn" id="trackBtn">Track Collection</button>
</section>
<!-- Track Collection -->
<section aria-label="Track Collection" id="trackCollection" tabindex="0">
<button aria-label="Back to Home" class="back-btn" type="button">
<svg viewbox="0 0 24 24"><path d="M15 18l-6-6 6-6"></path></svg>
        Back
      </button>
<h2>
<svg viewbox="0 0 24 24"><path d="M13 2v2H7v8H5v2h2v2h2v-2h6v-2h-2V6h2V4h-2V2z"></path></svg>
        Track Collection
      </h2>
<div class="status-box" id="trackStatus">
        Status: <strong>Requested</strong>
</div>
</section>
<!-- History -->
<section aria-label="Collection History" id="history" tabindex="0">
<button aria-label="Back to Home" class="back-btn" type="button">
<svg viewbox="0 0 24 24"><path d="M15 18l-6-6 6-6"></path></svg>
        Back
      </button>
<h2>
<svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zM3 10h18v2H3zM3 14h18v2H3z"></path></svg>
        History
      </h2>
<div aria-label="Filter history" class="filter-group" role="region">
<label>Filter by Type:</label>
<select id="filterType">
<option value="all">All</option>
<option value="General Waste">General Waste</option>
<option value="Recycling">Recycling</option>
<option value="Food Waste">Food Waste</option>
</select>
</div>
<ul class="history-list" id="historyList"></ul>
</section>
<!-- Settings / Help -->
<section aria-label="Settings and Help" id="settings" tabindex="0">
<button aria-label="Back to Home" class="back-btn" type="button">
<svg viewbox="0 0 24 24"><path d="M15 18l-6-6 6-6"></path></svg>
        Back
      </button>
<h2>
<svg viewbox="0 0 24 24"><path d="M19.14 12.936a7.985 7.985 0 000-1.873l2.036-1.593-2-3.464-2.355 1.082a7.964 7.964 0 00-1.725-1l-.356-2.482H9.41l-.356 2.482a7.97 7.97 0 00-1.725 1L5.02 6.006l-2 3.464 2.036 1.593a7.97 7.97 0 000 1.873L3.02 14.506l2 3.464 2.355-1.082a7.964 7.964 0 001.725 1l.356 2.482h3.447l.356-2.482a7.965 7.965 0 001.725-1l2.355 1.082 2-3.464-2.036-1.57zM12 15.5a3.5 3.5 0 110-7 3.5 3.5 0 010 7z"></path></svg>
        Settings &amp; Help
      </h2>
<h3>Support Chat</h3>
<p><em>Coming soon...</em></p>
<h3>FAQ</h3>
<ul>
<li><strong>How to request a collection?</strong> Use the Request Collection form after scanning the QR code.</li>
<li><strong>How to track my collection?</strong> Use the Track Collection screen.</li>
<li><strong>How to update my profile?</strong> Available soon in Settings.</li>
</ul>
<h3>Profile</h3>
<p><em>Coming soon...</em></p>
</section>
</main>
<nav aria-label="Bottom navigation">
<button aria-controls="home" aria-selected="true" class="active" data-tab="home" tabindex="0" title="Home">
<svg viewbox="0 0 24 24"><path d="M3 3h18v18H3z" fill="none"></path><path d="M21 3H3v18h18V3zM9 8H7v2H5v2h2v2h2v-2h2v-2H9z"></path></svg>
      Home
    </button>
<button aria-controls="history" aria-selected="false" data-tab="history" tabindex="-1" title="History">
<svg viewbox="0 0 24 24"><path d="M3 4v16h18V4H3z"></path></svg>
      History
    </button>
<button aria-controls="settings" aria-selected="false" data-tab="settings" tabindex="-1" title="Settings">
<svg viewbox="0 0 24 24"><path d="M19.14 12.936a7.985 7.985 0 000-1.873l2.036-1.593-2-3.464-2.355 1.082a7.964 7.964 0 00-1.725-1l-.356-2.482H9.41l-.356 2.482a7.97 7.97 0 00-1.725 1L5.02 6.006l-2 3.464 2.036 1.593a7.97 7.97 0 000 1.873L3.02 14.506l2 3.464 2.355-1.082a7.964 7.964 0 001.725 1l.356 2.482h3.447l.356-2.482a7.965 7.965 0 001.725-1l2.355 1.082 2-3.464-2.036-1.57zM12 15.5a3.5 3.5 0 110-7 3.5 3.5 0 010 7z"></path></svg>
      Settings
    </button>
</nav>
</div>
<script>
  const navButtons = document.querySelectorAll('nav[aria-label="Bottom navigation"] button');
  const sections = document.querySelectorAll('main section');
  const backButtons = document.querySelectorAll('button.back-btn');

  function activateTab(tab) {
    navButtons.forEach(btn => {
      const isActive = btn.getAttribute('data-tab') === tab;
      btn.classList.toggle('active', isActive);
      btn.setAttribute('aria-selected', isActive ? 'true' : 'false');
      btn.tabIndex = isActive ? 0 : -1;
    });
    sections.forEach(sec => {
      sec.classList.toggle('active', sec.id === tab);
    });

    // Show back button except on home and login
    sections.forEach(sec => {
      const backBtn = sec.querySelector('button.back-btn');
      if (!backBtn) return;
      if (sec.id === 'home' || sec.id === 'login') {
        backBtn.style.display = 'none';
      } else {
        backBtn.style.display = 'flex';
      }
    });
  }

  navButtons.forEach(btn => {
    btn.addEventListener('click', () => activateTab(btn.getAttribute('data-tab')));
  });

  backButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      // For Back: return always to Home (could be adapted for more complex history)
      activateTab('home');
    });
  });

  // Start on login
  activateTab('login');

  // Login form
  const loginForm = document.getElementById('loginForm');
  const storeIdInput = document.getElementById('storeId');
  loginForm.addEventListener('submit', e => {
    e.preventDefault();
    if (storeIdInput.value.trim() === '') {
      alert('Please enter your Store ID');
      return;
    }
    alert(`Welcome Store ${storeIdInput.value.trim()}!`);
    activateTab('home');
  });

  // Simulate QR code scan onboarding (fast login)
  const startScanBtn = document.getElementById('startScanBtn');
  const locationInput = document.getElementById('location');
  const binTypeInput = document.getElementById('binType');
  startScanBtn.addEventListener('click', () => {
    // Simulate scanning QR onboarding: fill location and bin type + auto login
    locationInput.value = "Oxford St Store";
    binTypeInput.value = "General Waste";
    alert('QR code scanned, onboarding complete.');
    activateTab('requestForm');
  });

  // Handle collection request submission
  const collectionForm = document.getElementById('collectionForm');
  collectionForm.addEventListener('submit', e => {
    e.preventDefault();
    const volume = parseFloat(document.getElementById('volume').value);
    const timeWindow = document.getElementById('timeWindow').value;

    if (!volume || volume <= 0) {
      alert('Please enter a valid volume');
      return;
    }
    if (!timeWindow) {
      alert('Please select a time window');
      return;
    }

    // Simulate ETA calculation (random 30-90 minutes later)
    const now = new Date();
    const eta = new Date(now.getTime() + (30 + Math.floor(Math.random() * 60)) * 60000);
    document.getElementById('etaTime').textContent = eta.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});

    activateTab('requestConfirm');
  });

  // Track Collection simulation
  const trackBtn = document.getElementById('trackBtn');
  const trackStatusBox = document.getElementById('trackStatus');
  const statuses = ["Requested", "Accepted", "In Transit", "Collected"];
  let currentStatusIndex = 0;
  trackBtn.addEventListener('click', () => {
    currentStatusIndex = 0;
    trackStatusBox.innerHTML = 'Status: <strong>' + statuses[currentStatusIndex] + '</strong>';

    const interval = setInterval(() => {
      currentStatusIndex++;
      if (currentStatusIndex >= statuses.length) {
        clearInterval(interval);
        alert('Collection Completed!');
        return;
      }
      trackStatusBox.innerHTML = 'Status: <strong>' + statuses[currentStatusIndex] + '</strong>';
    }, 3000);
    activateTab('trackCollection');
  });

  // History data & filter
  const historyList = document.getElementById('historyList');
  const filterType = document.getElementById('filterType');
  const pastCollections = [
    {date:"2025-05-01", location:"Oxford St Store", bin:"General Waste", volume:2.3, status:"Collected"},
    {date:"2025-05-02", location:"Camden Central", bin:"Recycling", volume:1.0, status:"Collected"},
    {date:"2025-05-03", location:"Shoreditch Hub", bin:"Food Waste", volume:1.5, status:"Collected"},
    {date:"2025-05-04", location:"Brixton Point", bin:"General Waste", volume:3.1, status:"Collected"},
    {date:"2025-05-05", location:"Oxford St Store", bin:"Recycling", volume:0.9, status:"Collected"},
  ];

  function renderHistory(filter = 'all') {
    historyList.innerHTML = '';
    pastCollections
      .filter(c => filter === 'all' || c.bin === filter)
      .forEach(c => {
      const li = document.createElement('li');
      li.textContent = `${c.date} - ${c.location} - ${c.bin} - Volume: ${c.volume}m³ - Status: ${c.status}`;
      historyList.appendChild(li);
    });
  }
  filterType.addEventListener('change', e => renderHistory(e.target.value));
  renderHistory();
</script>
</body>
</html>
