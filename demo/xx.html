<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EvoSustain All-in-One Simulator</title>
  <!-- Leaflet CSS for Business Map -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    /* Global */
    body, html { margin:0; padding:0; font-family:'Segoe UI', sans-serif; background:#f0f2f5; height:100vh; display:flex; flex-direction:column; align-items:center; }
    #app-selector { margin:1rem; }
    #app-selector button { margin:0 0.5rem; padding:0.5rem 1rem; border:none; border-radius:8px; background:#1976d2; color:#fff; font-weight:bold; }
    #app-selector button.active { background:#0d47a1; }
    .app-container {
    position: relative;
}
    /* Hide other app containers */
    .section-container { display: none; }
    .section-container.active { display: flex; flex-direction: column; }
.app-container { width:360px; height:740px; border:8px solid #333; border-radius:32px; box-shadow:0 0 20px rgba(0,0,0,0.2); background:#fff; overflow:hidden; position:relative; display:flex; flex-direction:column; }
    .status-bar { height:24px; background:#e3f2fd; padding:0 12px; display:flex; justify-content:space-between; align-items:center; font-size:12px; }
    .clock { font-family:monospace; }
    header { background:#2196f3; color:#fff; padding:0.6rem; text-align:center; font-size:1.2rem; font-weight:bold; }
    main { flex:1; overflow-y:auto; position:relative; background:#f9fcff; }
    .section { display:none; padding:1rem; }
    .section.active { display:block; }
    .card { background:#fff; border-radius:16px; padding:1rem; margin-bottom:1rem; box-shadow:0 2px 6px rgba(0,0,0,0.05); }
    .button { display:block; width:100%; padding:0.65rem; background:linear-gradient(to right,#42a5f5,#1e88e5); color:#fff; border:none; border-radius:12px; font-size:0.95rem; font-weight:600; margin-top:0.65rem; cursor:pointer; transition:transform 0.2s,box-shadow 0.2s; }
    .button:hover { transform:scale(1.02); box-shadow:0 4px 10px rgba(33,150,243,0.4); }
    nav { display:flex; justify-content:space-around; background:#e3f2fd; padding:0.5rem 0; position:absolute; bottom:0; width:100%; }
    nav button { background:none; border:none; font-size:1rem; color:#1976d2; }
    nav button.active { background:#bbdefb; font-weight:bold; }
    /* Store App Specific */
    /* Business App Specific */
    #map { width:100%; height:300px; border-radius:10px; }
    /* Driver App Specific */
    .message { background:#bbdefb; padding:0.5rem; border-radius:8px; margin-top:0.5rem; text-align:center; font-weight:bold; display:none; }
  </style>
</head>
<body>
  <!-- App Selector -->
  <div id="app-selector">
    <button data-app="store" class="active">Store</button>
    <button data-app="business">Business</button>
    <button data-app="driver">Driver</button>
  </div>

  <!-- App Container -->
  <div class="app-container">

    <!-- Store App -->
    <div id="store" class="section-container active">
      <div class="status-bar">
        <span id="store-clock" class="clock">--:--:--</span>
        <span>ğŸ“¶ ğŸ”‹</span>
      </div>
      <header>Store App</header>
      <main>
        <section id="login-store" class="section active">
          <div class="card">
            <h2>Login / Sign-Up</h2>
            <input type="text" placeholder="Store ID" style="width:100%;padding:0.5rem;border:1px solid #ccc;border-radius:8px;" />
            <button class="button" data-section="request-store">Login</button>
            <button class="button" data-section="request-store">Scan QR Code</button>
          </div>
        </section>
        <section id="request-store" class="section">
          <div class="card">
            <h2>Request Collection</h2>
            <button class="button" data-section="login-store">â† Back</button>
            <p><strong>Location:</strong> Auto-filled</p>
            <p><strong>Bin Type:</strong> Auto-filled</p>
            <input type="number" placeholder="Volume (mÂ³)" style="width:100%;padding:0.5rem;border:1px solid #ccc;border-radius:8px;" />
            <select style="width:100%;padding:0.5rem;border:1px solid #ccc;border-radius:8px;margin-top:0.5rem;">
              <option>Select Time Window</option>
              <option>9:00â€“11:00</option>
              <option>11:00â€“13:00</option>
              <option>13:00â€“15:00</option>
            </select>
            <textarea rows="3" placeholder="Additional Notes" style="width:100%;padding:0.5rem;border:1px solid #ccc;border-radius:8px;margin-top:0.5rem;"></textarea>
            <button class="button" data-section="track-store">Submit Request</button>
          </div>
        </section>
        <section id="track-store" class="section">
          <div class="card">
            <h2>Track Collection</h2>
            <button class="button" data-section="request-store">â† Back</button>
            <ul>
              <li>Requested âœ…</li>
              <li>Accepted âœ…</li>
              <li><strong>In Transit ğŸšš</strong></li>
              <li>Collected â³</li>
            </ul>
          </div>
        </section>
        <section id="history-store" class="section">
          <div class="card">
            <h2>Pickup History</h2>
            <button class="button" data-section="track-store">â† Back</button>
            <p>ğŸ“… 20 May - Food Waste - <strong>Collected</strong></p>
            <p>ğŸ“… 18 May - Recycling - <strong>Collected</strong></p>
            <p>ğŸ“… 16 May - Glass - <strong>Collected</strong></p>
            <p>ğŸ“… 14 May - Cardboard - <strong>Missed</strong></p>
            <p>ğŸ“… 12 May - Plastic - <strong>Collected</strong></p>
            <p>ğŸ“… 10 May - General Waste - <strong>Collected</strong></p>
          </div>
        </section>
        <section id="help-store" class="section">
          <div class="card">
            <h2>Settings & Help</h2>
            <button class="button" data-section="history-store">â† Back</button>
            <p><strong>Support Chat:</strong> Coming soon</p>
            <p><strong>FAQ:</strong> How to request, track, and update your profile</p>
            <p><strong>Profile:</strong> Edit and update your store info (coming soon)</p>
          </div>
        </section>
        <section id="notifications-store" class="section">
          <div class="card">
            <h2>Notifications</h2>
            <button class="button" data-section="help-store">â† Back</button>
            <ul>
              <li>ğŸ“¢ New collection slot available for weekends.</li>
              <li>âœ… Your last pickup on 20 May was successful.</li>
              <li>ğŸ“¦ New bins will be delivered next week.</li>
            </ul>
          </div>
        </section>
        <section id="orders-store" class="section">
          <div class="card">
            <h2>Order Supplies</h2>
            <button class="button" data-section="notifications-store">â† Back</button>
            <select style="width:100%;padding:0.5rem;border:1px solid #ccc;border-radius:8px;">
              <option>Select Item</option>
              <option>New Bin</option>
              <option>Bin Liners</option>
              <option>QR Code Stickers</option>
              <option>Trash Bags</option>
              <option>Cleaning Products</option>
              <option>Other</option>
            </select>
            <input type="number" placeholder="Quantity" style="width:100%;padding:0.5rem;border:1px solid #ccc;border-radius:8px;margin-top:0.5rem;" />
            <textarea rows="3" placeholder="Additional Notes (optional)" style="width:100%;padding:0.5rem;border:1px solid #ccc;border-radius:8px;margin-top:0.5rem;"></textarea>
            <button class="button" onclick="alert('Order request submitted!')">Submit Order</button>
          </div>
        </section>
      </main>
      <nav>
        <button data-section="login-store" class="active">ğŸ </button>
        <button data-section="request-store">ğŸ—‘ï¸</button>
        <button data-section="track-store">ğŸ“¦</button>
        <button data-section="history-store">ğŸ“œ</button>
        <button data-section="help-store">â“</button>
        <button data-section="notifications-store">ğŸ””</button>
        <button data-section="orders-store">â•</button>
      </nav>
    </div>

    <!-- Business App -->
    <div id="business" class="section-container">
      <div class="status-bar">
        <span>&nbsp;</span>
        <span>ğŸ“¶ ğŸ”‹</span>
      </div>
      <header>Business Portal</header>
      <main>
        <section id="login-biz" class="section active">
          <div class="card">
            <h3>Login</h3>
            <input type="text" placeholder="Email" style="width:100%;padding:0.5rem;border:1px solid #ccc;border-radius:8px;margin-bottom:0.5rem;" />
            <input type="password" placeholder="Password" style="width:100%;padding:0.5rem;border:1px solid #ccc;border-radius:8px;" />
            <button class="button" data-section="home-biz">Sign In</button>
          </div>
        </section>
        <section id="home-biz" class="section">
          <div class="card"><h3>Welcome to SaaS Business</h3><p>ğŸ“Š Monitor activity and manage your business easily.</p></div>
          <div class="card"><h3>Quick Metrics</h3><p>ğŸ›’ Stores: 500</p><p>ğŸšš Drivers: 10</p><p>ğŸ“¦ Requests Today: 132</p></div>
        </section>
        <section id="dashboard-biz" class="section">
          <div class="card"><h3>KPIs Overview</h3><p>â± Avg. Route Time: 32 min</p><p>âœ… Completed Tasks: 440</p><p>âš  Alerts: 3 system issues</p></div>
        </section>
        <section id="clients-biz" class="section">
          <div class="card"><h3>Stores</h3><p>Store A â€“ ğŸ“¦ 120 pickups</p><p>Store B â€“ ğŸ“¦ 87 pickups</p></div>
        </section>
        <section id="requests-biz" class="section">
          <div class="card"><h3>Pickup Requests</h3><p>ğŸ§¾ Request X â€“ <button class="button">Approve</button> <button class="button">Decline</button></p><p>ğŸ§¾ Request Y â€“ <button class="button">Approve</button> <button class="button">Reschedule</button></p></div>
        </section>
        <section id="planning-biz" class="section">
          <div class="card"><h3>Planning</h3><p>ğŸ—“ Calendar view</p><p>ğŸ“ Optimized route for 6 vehicles</p></div>
        </section>
        <section id="assignment-biz" class="section">
          <div class="card"><h3>Assign Drivers</h3><p>Driver 1 â¡ Route A</p><p>Driver 2 â¡ Route B</p></div>
        </section>
        <section id="mapview-biz" class="section">
          <div class="card"><h3>Live Map</h3><div id="map"></div></div>
        </section>
        <section id="performance-biz" class="section">
          <div class="card" style="display:grid;grid-template-columns:1fr 1fr;gap:0.5rem;text-align:center;font-size:0.85rem;">
            <div style="background:#e3f2fd;padding:0.5rem;border-radius:10px;">â±<br><strong>92%</strong><br>Efficiency</div>
            <div style="background:#e3f2fd;padding:0.5rem;border-radius:10px;">â›½<br><strong>178L</strong><br>Fuel Saved</div>
            <div style="background:#e3f2fd;padding:0.5rem;border-radius:10px;">âœ…<br><strong>1040</strong><br>Pickups</div>
            <div style="background:#e3f2fd;padding:0.5rem;border-radius:10px;">ğŸ›‘<br><strong>95%</strong><br>No Accidents</div>
            <div style="background:#e3f2fd;padding:0.5rem;border-radius:10px;">âš ï¸<br><strong>2</strong><br>With Incidents</div>
            <div style="background:#e3f2fd;padding:0.5rem;border-radius:10px;">ğŸ§­<br><strong>88%</strong><br>Smooth Drive</div>
            <div style="background:#e3f2fd;padding:0.5rem;border-radius:10px;">ğŸ“‰<br><strong>-12%</strong><br>Downtime</div>
          </div>
        </section>
        <section id="stats-biz" class="section">
          <div class="card"><h3>Driver Performance</h3><p>No Incidents: 9/10 drivers</p><p>Idle Time: -15%</p></div>
        </section>
        <section id="settings-biz" class="section">
          <div class="card"><h3>Settings</h3><p>ğŸ” Change Password</p><p>ğŸŒ Language</p><p>ğŸ“§ Notifications</p></div>
        </section>
      </main>
      <nav>
        <button data-section="home-biz" class="active">ğŸ </button>
        <button data-section="dashboard-biz">ğŸ“‹</button>
        <button data-section="clients-biz">ğŸ‘¥</button>
        <button data-section="requests-biz">ğŸ§¾</button>
        <button data-section="planning-biz">ğŸ—“</button>
        <button data-section="assignment-biz">ğŸšš</button>
        <button data-section="mapview-biz">ğŸ—ºï¸</button>
        <button data-section="performance-biz">ğŸ“Š</button>
        <button data-section="stats-biz">ğŸ“ˆ</button>
        <button data-section="settings-biz">âš™ï¸</button>
      </nav>
    </div>

    <!-- Driver App -->
    <div id="driver" class="section-container">
      <div class="status-bar">
        <span id="driver-clock" class="clock">--:--:--</span>
        <span>ğŸ“¶ ğŸ”‹</span>
      </div>
      <header>Driver App</header>
      <main>
        <section id="login-drv" class="section active">
          <div class="card"><h3>Login</h3><input placeholder="Driver ID" style="width:100%;padding:0.5rem;border:1px solid #ccc;border-radius:8px;" /><button class="button" data-section="route-drv">Start Shift</button></div>
        </section>
        <section id="route-drv" class="section">
          <div class="card">
            <h3>Today's Route</h3>
            <p>Stop 1: Main St, Organic Waste</p>
            <p>Stop 2: 5th Ave, Recycling</p>
            <button class="button" data-section="map-drv">Map</button>
            <button class="button" onclick="recordBreak()">Break ğŸ•’</button>
            <button class="button" onclick="reportDelay()">Delay â³</button>
            <button class="button" onclick="reportMaintenance()">Vehicle Issue ğŸš›</button>
          </div>
        </section>
        <section id="map-drv" class="section">
          <div class="card"><h3>Map View</h3><p>SVG / Google Maps</p><button class="button" data-section="detail-drv">View Task</button><button class="button" onclick="callSupport()">Call Support ğŸ“</button></div>
        </section>
        <section id="detail-drv" class="section">
          <div class="card"><h3>Collection Detail</h3><p><strong>Address:</strong> 123 Main St</p><p><strong>Type:</strong> Organic Waste</p><p><strong>Notes:</strong> Watch gate</p><button class="button" onclick="showMessage('task-msg','Arrived âœ…')">Arrived</button><button class="button" onclick="showMessage('task-msg','Collected âœ…')">Collected</button><button class="button" onclick="showMessage('task-msg','Issue âš ï¸')">Report Issue</button><button class="button" onclick="uploadPhoto()">Upload Photo ğŸ“·</button><div id="task-msg" class="message"></div></div>
        </section>
        <section id="summary-drv" class="section">
          <div class="card"><h3>End of Day</h3><p>Completed: 12/12</p><p>Missed: 0</p><p>Issues: 1</p><button class="button" onclick="showMessage('end-msg','Report Submitted âœ…')">Submit</button><div id="end-msg" class="message"></div></div>
        </section>
      </main>
      <nav>
        <button data-section="login-drv" class="active">ğŸ </button>
        <button data-section="route-drv">ğŸ§­</button>
        <button data-section="map-drv">ğŸ—ºï¸</button>
        <button data-section="detail-drv">ğŸ“‹</button>
        <button data-section="summary-drv">ğŸ“Š</button>
      </nav>
    </div>

  </div>

  <script>
    // App selector logic
    document.querySelectorAll('#app-selector button').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('#app-selector button').forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        const app=btn.getAttribute('data-app');
        document.querySelectorAll('.section-container').forEach(c=>c.classList.remove('active'));
        document.getElementById(app).classList.add('active');
      });
    });
    // Section nav binding
    function bindNav(appId) {
      const container=document.getElementById(appId);
      container.querySelectorAll('[data-section]').forEach(btn=>{
        btn.addEventListener('click',()=>{
          const sec=btn.getAttribute('data-section');
          container.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
          container.querySelectorAll('nav button').forEach(n=>n.classList.remove('active'));
          container.querySelector('#'+sec).classList.add('active');
          container.querySelector('nav button[data-section="'+sec+'"]')?.classList.add('active');
          if(appId==='business' && sec==='mapview-biz' && !window.mapInitialized) setTimeout(initMap,150);
        });
      });
    }
    ['store','business','driver'].forEach(bindNav);
    // Clocks
    function updateClocks(){const now=new Date().toLocaleTimeString();document.getElementById('store-clock').textContent=now;document.getElementById('driver-clock').textContent=now;}setInterval(updateClocks,1000);updateClocks();
    // Helper actions
    function recordBreak(){alert('Break started');}
    function reportDelay(){const r=prompt('Delay reason:');if(r)alert('Delay: '+r);}  
    function reportMaintenance(){const i=prompt('Describe issue:');if(i)alert('Maintenance: '+i);}  
    function callSupport(){alert('Calling support...');}  
    function showMessage(id,msg){const e=document.getElementById(id);e.innerText=msg;e.style.display='block';}
    function uploadPhoto(){alert('Upload feature coming soon');}
    // Leaflet map
    window.mapInitialized=false;
    function initMap(){L.map('map').setView([51.505,-0.09],13).addTo(L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:19}));window.mapInitialized=true;}
  </script>
</body>
</html>
